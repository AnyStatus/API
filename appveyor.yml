version: 1.0.{build}

image: Visual Studio 2017
configuration: Release
platform: Any CPU

skip_commits:
  files:
    - '**/*.md'
    
before_build:
- cmd: nuget restore src
- ps: |
    cd $env:APPVEYOR_BUILD_FOLDER
    $file = 'src\AnyStatus.API\AnyStatus.API.nuspec'
    $xml = [xml](Get-Content $file)
    $xml.package.metadata.version = $env:APPVEYOR_BUILD_VERSION
    $xml.Save($file)

build:
  publish_nuget: true
  verbosity: minimal